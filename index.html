<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stake Platform — Demo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --border: rgba(15, 23, 42, .10);
      --shadow: 0 18px 60px rgba(2, 6, 23, .10);
      --blue: rgba(2,132,199,.95);
    }

    /* Background similar vibe (not 1:1) */
    .hero-bg{
      background:
        radial-gradient(circle at 12% 28%, rgba(56,189,248,.28), transparent 52%),
        radial-gradient(circle at 40% 10%, rgba(147,197,253,.18), transparent 48%),
        radial-gradient(circle at 88% 18%, rgba(99,102,241,.12), transparent 50%),
        linear-gradient(135deg, rgba(56,189,248,.28), rgba(255,255,255,0) 55%),
        linear-gradient(180deg, rgba(241, 250, 255, 1), rgba(255,255,255,1));
    }
    .rings{
      background-image:
        radial-gradient(circle at 20% 35%, transparent 0 58%, rgba(2,132,199,.12) 59% 59.5%, transparent 60%),
        radial-gradient(circle at 18% 40%, transparent 0 70%, rgba(2,132,199,.10) 71% 71.5%, transparent 72%),
        radial-gradient(circle at 25% 60%, transparent 0 64%, rgba(2,132,199,.10) 65% 65.5%, transparent 66%);
      background-repeat:no-repeat;
      background-size: 800px 800px, 950px 950px, 820px 820px;
      background-position: -220px -140px, -260px -220px, -180px -120px;
    }

    .glass { backdrop-filter: blur(12px); background: rgba(255,255,255,.82); }
    .shadowSoft { box-shadow: var(--shadow); }
    .card { border: 1px solid var(--border); background: rgba(255,255,255,.92); }
    .muted { color: rgba(15,23,42,.65); }

    /* Sliders */
    input[type="range"]{
      -webkit-appearance:none;
      width:100%;
      height:6px;
      border-radius:999px;
      background: linear-gradient(90deg, var(--blue), rgba(56,189,248,.35));
      outline:none;
    }
    input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none;
      width:18px;height:18px;border-radius:999px;
      background:white;
      border:2px solid var(--blue);
      box-shadow:0 8px 18px rgba(2,6,23,.18);
      cursor:pointer;
    }
    input[type="range"]::-moz-range-thumb{
      width:18px;height:18px;border-radius:999px;
      background:white;
      border:2px solid var(--blue);
      box-shadow:0 8px 18px rgba(2,6,23,.18);
      cursor:pointer;
    }

    /* “Pill” chips like in screenshot */
    .pill{
      display:inline-flex; align-items:center; gap:.5rem;
      padding:.55rem .85rem;
      border:1px solid rgba(2,132,199,.18);
      border-radius:999px;
      background: rgba(255,255,255,.85);
      color: rgba(15,23,42,.75);
      font-size: .95rem;
    }
    .pill svg{ width:18px; height:18px; }
  </style>
</head>

<body class="bg-white text-slate-900">

  <!-- HEADER -->
  <header class="sticky top-0 z-50 border-b border-slate-200 glass">
    <div class="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-10 w-10 rounded-2xl bg-sky-500 flex items-center justify-center text-white font-bold">T</div>
        <div class="leading-tight">
          <div class="font-semibold">Stake Platform</div>
          <div class="text-xs muted" data-i18n="tagline">Demo landing</div>
        </div>
      </div>

      <nav class="hidden lg:flex gap-6 text-sm muted">
        <a href="#home" class="hover:text-slate-900" data-i18n="navHome">Главная</a>
        <a href="#advantages" class="hover:text-slate-900" data-i18n="navAdvantages">Наши преимущества</a>
        <a href="#how" class="hover:text-slate-900" data-i18n="navHow">Как начать</a>
        <a href="#plans" class="hover:text-slate-900" data-i18n="navPlans">Тарифы</a>
        <a href="#calc" class="hover:text-slate-900" data-i18n="navCalc">Калькулятор</a>
        <a href="#faq" class="hover:text-slate-900" data-i18n="navFaq">FAQ</a>
      </nav>

      <div class="flex items-center gap-2">
        <button id="langEN" class="rounded-xl border border-slate-300 bg-white px-3 py-2 text-xs font-medium hover:bg-slate-50">EN</button>
        <button id="langRU" class="rounded-xl border border-slate-300 bg-white px-3 py-2 text-xs font-medium hover:bg-slate-50">RU</button>

        <a href="app.html" class="rounded-2xl bg-sky-600 px-5 py-2.5 text-white text-sm font-medium hover:bg-sky-700 shadowSoft" data-i18n="stakeNow">
          Stake Now
        </a>
      </div>
    </div>
  </header>

  <!-- HERO (like your screenshot vibe) -->
  <section id="home" class="hero-bg rings">
    <div class="mx-auto max-w-6xl px-4 py-10 md:py-14">
      <div class="grid lg:grid-cols-2 gap-10 items-center">
        <!-- Left -->
        <div>
          <div class="flex flex-wrap gap-3">
            <span class="pill">
              <svg viewBox="0 0 24 24" fill="none"><path d="M4 18V6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M8 18V11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M12 18V8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M16 18V13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M20 18V9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              <span data-i18n="pill1">Высокий ROI</span>
            </span>

            <span class="pill">
              <svg viewBox="0 0 24 24" fill="none"><path d="M7 12h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M12 7v10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              <span data-i18n="pill2">Просто</span>
            </span>

            <span class="pill">
              <svg viewBox="0 0 24 24" fill="none"><path d="M12 3l8 4v6c0 5-3.5 8.5-8 9-4.5-.5-8-4-8-9V7l8-4Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg>
              <span data-i18n="pill3">Безопасно</span>
            </span>
          </div>

          <h1 class="mt-6 text-5xl md:text-6xl font-extrabold leading-[0.98]">
            <span data-i18n="heroLine1">Получайте</span><br />
            <span class="text-sky-600" data-i18n="heroLine2">пассивный</span><br />
            <span data-i18n="heroLine3">доход в TON</span>
          </h1>

          <p class="mt-6 max-w-xl text-lg muted" data-i18n="heroDesc">
            Демонстрационный текст. Позже заменим описание и добавим любые блоки/картинки.
          </p>

          <div class="mt-8 flex flex-wrap gap-4">
            <a href="#topup" class="rounded-2xl bg-sky-600 px-7 py-3 text-white font-semibold hover:bg-sky-700 shadowSoft" data-i18n="heroBtn1">
              Начать сейчас →
            </a>

            <a href="#calc" class="rounded-2xl border border-slate-300 bg-white px-7 py-3 font-semibold hover:bg-slate-50" data-i18n="heroBtn2">
              Калькулятор
            </a>
          </div>

          <div class="mt-6 text-sm muted" data-i18n="heroNote">
            * Это демо-страница. Числа/тексты мы поменяем позже.
          </div>
        </div>

        <!-- Right: image placeholder -->
        <div class="relative">
          <div class="rounded-[36px] border border-slate-200 bg-white/75 glass shadowSoft p-6">
            <div class="text-sm muted" data-i18n="rightCardTitle">3D image placeholder</div>

            <!-- Placeholder (replace with <img src="..."> later) -->
            <div class="mt-4 h-[340px] md:h-[420px] rounded-[28px] border border-slate-200 bg-gradient-to-br from-sky-100 via-white to-indigo-100 flex items-center justify-center text-slate-500">
              <div class="text-center">
                <div class="text-xl font-semibold" data-i18n="rightCardText1">Здесь будет картинка</div>
                <div class="mt-2 text-sm muted" data-i18n="rightCardText2">Скинешь изображение — вставим</div>
              </div>
            </div>

            <div class="mt-4 grid grid-cols-3 gap-3 text-sm">
              <div class="rounded-2xl border border-slate-200 bg-white p-4 text-center">
                <div class="text-xs muted" data-i18n="mini1">TVL</div>
                <div class="font-bold">—</div>
              </div>
              <div class="rounded-2xl border border-slate-200 bg-white p-4 text-center">
                <div class="text-xs muted" data-i18n="mini2">Users</div>
                <div class="font-bold">—</div>
              </div>
              <div class="rounded-2xl border border-slate-200 bg-white p-4 text-center">
                <div class="text-xs muted" data-i18n="mini3">APR</div>
                <div class="font-bold">—</div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- ADVANTAGES -->
  <section id="advantages" class="mx-auto max-w-6xl px-4 py-14">
    <div class="flex items-end justify-between gap-4">
      <div>
        <h2 class="text-2xl font-bold" data-i18n="advTitle">Наши преимущества</h2>
        <p class="mt-2 muted" data-i18n="advDesc">Пока заглушки — ты потом скажешь, что тут должно быть.</p>
      </div>
      <a href="#topup" class="hidden md:inline-flex rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm font-medium hover:bg-slate-50" data-i18n="stakeNowArrow">
        Stake now →
      </a>
    </div>

    <div class="mt-7 grid md:grid-cols-4 gap-4">
      <div class="rounded-3xl card p-6 shadowSoft"><div class="font-semibold">—</div><p class="mt-2 text-sm muted">—</p></div>
      <div class="rounded-3xl card p-6 shadowSoft"><div class="font-semibold">—</div><p class="mt-2 text-sm muted">—</p></div>
      <div class="rounded-3xl card p-6 shadowSoft"><div class="font-semibold">—</div><p class="mt-2 text-sm muted">—</p></div>
      <div class="rounded-3xl card p-6 shadowSoft"><div class="font-semibold">—</div><p class="mt-2 text-sm muted">—</p></div>
    </div>
  </section>

  <!-- HOW -->
  <section id="how" class="bg-slate-50 border-y border-slate-200">
    <div class="mx-auto max-w-6xl px-4 py-14">
      <h2 class="text-2xl font-bold" data-i18n="howTitle">Как начать</h2>
      <p class="mt-2 muted" data-i18n="howDesc">3 шага (заглушки).</p>

      <div class="mt-7 grid md:grid-cols-3 gap-4">
        <div class="rounded-3xl border border-slate-200 bg-white p-6 shadowSoft">
          <div class="text-sky-700 font-semibold">01</div>
          <div class="mt-2 font-semibold text-lg">—</div>
          <div class="mt-1 text-sm muted">—</div>
        </div>
        <div class="rounded-3xl border border-slate-200 bg-white p-6 shadowSoft">
          <div class="text-sky-700 font-semibold">02</div>
          <div class="mt-2 font-semibold text-lg">—</div>
          <div class="mt-1 text-sm muted">—</div>
        </div>
        <div class="rounded-3xl border border-slate-200 bg-white p-6 shadowSoft">
          <div class="text-sky-700 font-semibold">03</div>
          <div class="mt-2 font-semibold text-lg">—</div>
          <div class="mt-1 text-sm muted">—</div>
        </div>
      </div>
    </div>
  </section>

  <!-- PLANS -->
  <section id="plans" class="mx-auto max-w-6xl px-4 py-14">
    <h2 class="text-2xl font-bold" data-i18n="plansTitle">Тарифы</h2>
    <p class="mt-2 muted" data-i18n="plansDesc">Пока без цифр — потом ты скажешь, что поставить.</p>

    <div class="mt-7 grid md:grid-cols-3 gap-4">
      <div class="rounded-3xl card p-6 shadowSoft">
        <div class="text-sm muted">Basic</div>
        <div class="mt-2 text-3xl font-bold">—</div>
        <div class="mt-2 text-sm muted">—</div>
        <a href="#topup" class="mt-5 block text-center rounded-2xl bg-sky-600 px-4 py-3 text-white font-semibold hover:bg-sky-700" data-i18n="stakeBtn">Stake</a>
      </div>

      <div class="rounded-3xl border border-sky-200 bg-sky-50 p-6 shadowSoft">
        <div class="text-sm muted">Pro</div>
        <div class="mt-2 text-3xl font-bold">—</div>
        <div class="mt-2 text-sm muted">—</div>
        <a href="#topup" class="mt-5 block text-center rounded-2xl bg-sky-600 px-4 py-3 text-white font-semibold hover:bg-sky-700" data-i18n="stakeBtn">Stake</a>
      </div>

      <div class="rounded-3xl card p-6 shadowSoft">
        <div class="text-sm muted">Premium</div>
        <div class="mt-2 text-3xl font-bold">—</div>
        <div class="mt-2 text-sm muted">—</div>
        <a href="#topup" class="mt-5 block text-center rounded-2xl bg-sky-600 px-4 py-3 text-white font-semibold hover:bg-sky-700" data-i18n="stakeBtn">Stake</a>
      </div>
    </div>
  </section>

  <!-- CALC + TOPUP -->
  <section id="calc" class="bg-slate-50 border-y border-slate-200">
    <div class="mx-auto max-w-6xl px-4 py-14">
      <div class="grid lg:grid-cols-2 gap-6 items-start">
        <!-- Calculator (numbers ON) -->
        <div class="rounded-3xl card p-6 shadowSoft">
          <div class="flex items-center justify-between gap-3">
            <div>
              <div class="text-sm muted" data-i18n="calcSmall">Калькулятор</div>
              <div class="text-xl font-bold" data-i18n="calcTitle">Расчёт прибыли</div>
            </div>
            <div class="text-xs muted" data-i18n="calcNote">Бегунок + ручной ввод</div>
          </div>

          <!-- Amount -->
          <div class="mt-5">
            <div class="flex items-end justify-between">
              <label class="text-sm font-medium" data-i18n="amountLabel">Сумма (TON)</label>
              <div class="text-sm font-semibold"><span id="amountOut">10</span> TON</div>
            </div>
            <div class="mt-2 grid grid-cols-3 gap-3 items-center">
              <input id="amountInput" class="col-span-1 rounded-2xl border border-slate-300 bg-white px-3 py-2 outline-none focus:border-sky-400" inputmode="decimal" />
              <div class="col-span-2">
                <input id="amountRange" type="range" min="10" max="10000" step="10" value="10" />
                <div class="mt-2 flex justify-between text-xs muted">
                  <span>10</span><span>10 000</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Days -->
          <div class="mt-5">
            <div class="flex items-end justify-between">
              <label class="text-sm font-medium" data-i18n="daysLabel">Дни</label>
              <div class="text-sm font-semibold"><span id="daysOut">1</span></div>
            </div>
            <div class="mt-2 grid grid-cols-3 gap-3 items-center">
              <input id="daysInput" class="col-span-1 rounded-2xl border border-slate-300 bg-white px-3 py-2 outline-none focus:border-sky-400" inputmode="numeric" />
              <div class="col-span-2">
                <input id="daysRange" type="range" min="1" max="30" step="1" value="1" />
                <div class="mt-2 flex justify-between text-xs muted">
                  <span>1</span><span>30</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Results -->
          <div class="mt-5 rounded-2xl border border-slate-200 bg-white p-4">
            <div class="grid grid-cols-3 gap-3 text-sm">
              <div class="rounded-xl border border-slate-200 bg-slate-50 p-3">
                <div class="muted" data-i18n="planLabel">Тариф</div>
                <div id="planOut" class="font-semibold">—</div>
              </div>
              <div class="rounded-xl border border-slate-200 bg-slate-50 p-3">
                <div class="muted" data-i18n="rateLabel">Ставка</div>
                <div id="rateOut" class="font-semibold">—</div>
              </div>
              <div class="rounded-xl border border-slate-200 bg-slate-50 p-3">
                <div class="muted" data-i18n="profitLabel">Прибыль</div>
                <div id="profitOut" class="font-semibold">—</div>
              </div>
            </div>

            <div class="mt-3 rounded-xl border border-slate-200 bg-slate-50 p-3">
              <div class="muted text-sm" data-i18n="totalLabel">Итого получите</div>
              <div id="totalOut" class="text-xl font-bold">—</div>
            </div>

            <div id="calcError" class="mt-3 text-sm text-rose-600"></div>
            <div class="mt-2 text-xs muted" data-i18n="calcFormulaNote">
              Формула: прибыль = сумма × ставка × дни (без капитализации)
            </div>
          </div>
        </div>

        <!-- Top up (TON Connect) -->
        <div id="topup" class="rounded-3xl card p-6 shadowSoft">
          <div class="flex items-end justify-between">
            <div>
              <div class="text-sm muted" data-i18n="topupSmall">Пополнение</div>
              <div class="mt-1 text-xl font-bold" data-i18n="topupTitle">Пополнить TON</div>
            </div>
            <div class="text-xs muted" data-i18n="topupConfirm">Подтверждение в кошельке</div>
          </div>

          <div class="mt-4 rounded-2xl bg-white p-4 border border-slate-200">
            <div id="connect" class="mb-3"></div>

            <label class="text-sm font-medium" data-i18n="topupAmount">Сумма (TON)</label>
            <input id="payAmount" value="1" inputmode="decimal"
                   class="mt-2 w-full rounded-2xl border border-slate-300 bg-white px-4 py-3 outline-none focus:border-sky-400" />

            <div class="mt-3 flex gap-2 flex-wrap">
              <button class="quick rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm hover:bg-slate-50" data-v="0.1">0.1</button>
              <button class="quick rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm hover:bg-slate-50" data-v="0.5">0.5</button>
              <button class="quick rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm hover:bg-slate-50" data-v="1">1</button>
              <button class="quick rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm hover:bg-slate-50" data-v="2">2</button>
            </div>

            <button id="payBtn" disabled
                    class="mt-4 w-full rounded-2xl bg-sky-600 px-4 py-3 font-semibold text-white disabled:opacity-50 hover:bg-sky-700"
                    data-i18n="depositBtn">
              Пополнить
            </button>

            <div id="payStatus" class="mt-4 text-sm text-slate-700 whitespace-pre-line"></div>
            <div class="mt-2 text-xs muted" data-i18n="feeNote">Комиссию сети оплачивает пользователь.</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="mx-auto max-w-6xl px-4 py-14">
    <h2 class="text-2xl font-bold" data-i18n="faqTitle">FAQ</h2>
    <div class="mt-6 space-y-3">
      <details class="rounded-3xl card p-5 shadowSoft">
        <summary class="font-semibold cursor-pointer" data-i18n="faq1Q">Это списывается автоматически?</summary>
        <div class="mt-2 text-sm muted" data-i18n="faq1A">Нет. Только после подтверждения пользователем в кошельке.</div>
      </details>
      <details class="rounded-3xl card p-5 shadowSoft">
        <summary class="font-semibold cursor-pointer" data-i18n="faq2Q">Почему нужны бегунки?</summary>
        <div class="mt-2 text-sm muted" data-i18n="faq2A">Чтобы быстро менять сумму и срок, и сразу видеть расчёт.</div>
      </details>
    </div>
  </section>

  <footer class="mx-auto max-w-6xl px-4 py-10 text-sm muted">
    © <span id="y"></span> Stake Platform demo.
  </footer>

  <!-- TON Connect UI -->
  <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    // ====== IMPORTANT: set your receiver address ======
    const RECEIVER_ADDRESS = "UQAq0NKzs0XtMyzbOn6ieHvAMudRq5ILy8oT_TOMLD8JEutW";

    // ====== i18n ======
    let currentLang = localStorage.getItem('lang') || 'ru';

    const T = {
      ru: {
        tagline:"Демо-лендинг",
        navHome:"Главная", navAdvantages:"Наши преимущества", navHow:"Как начать", navPlans:"Тарифы", navCalc:"Калькулятор", navFaq:"FAQ",
        stakeNow:"Stake Now",
        pill1:"Высокий ROI", pill2:"Просто", pill3:"Безопасно",
        heroLine1:"Получайте", heroLine2:"пассивный", heroLine3:"доход в TON",
        heroDesc:"Демонстрационный текст. Позже заменим описание и добавим любые блоки/картинки.",
        heroBtn1:"Начать сейчас →", heroBtn2:"Калькулятор",
        heroNote:"* Это демо-страница. Числа/тексты мы поменяем позже.",
        rightCardTitle:"3D image placeholder",
        rightCardText1:"Здесь будет картинка", rightCardText2:"Скинешь изображение — вставим",
        mini1:"TVL", mini2:"Users", mini3:"APR",
        advTitle:"Наши преимущества", advDesc:"Пока заглушки — ты потом скажешь, что тут должно быть.", stakeNowArrow:"Stake now →",
        howTitle:"Как начать", howDesc:"3 шага (заглушки).",
        plansTitle:"Тарифы", plansDesc:"Пока без цифр — потом ты скажешь, что поставить.", stakeBtn:"Stake",
        calcSmall:"Калькулятор", calcTitle:"Расчёт прибыли", calcNote:"Бегунок + ручной ввод",
        amountLabel:"Сумма (TON)", daysLabel:"Дни",
        planLabel:"Тариф", rateLabel:"Ставка", profitLabel:"Прибыль", totalLabel:"Итого получите",
        calcFormulaNote:"Формула: прибыль = сумма × ставка × дни (без капитализации)",
        topupSmall:"Пополнение", topupTitle:"Пополнить TON", topupConfirm:"Подтверждение в кошельке",
        topupAmount:"Сумма (TON)", depositBtn:"Пополнить", feeNote:"Комиссию сети оплачивает пользователь.",
        faqTitle:"FAQ",
        faq1Q:"Это списывается автоматически?", faq1A:"Нет. Только после подтверждения пользователем в кошельке.",
        faq2Q:"Почему нужны бегунки?", faq2A:"Чтобы быстро менять сумму и срок, и сразу видеть расчёт."
      },
      en: {
        tagline:"Demo landing",
        navHome:"Home", navAdvantages:"Advantages", navHow:"How to start", navPlans:"Plans", navCalc:"Calculator", navFaq:"FAQ",
        stakeNow:"Stake Now",
        pill1:"High ROI", pill2:"Simple", pill3:"Secure",
        heroLine1:"Get", heroLine2:"passive", heroLine3:"income in TON",
        heroDesc:"Demo text. We’ll replace copy and images later.",
        heroBtn1:"Start now →", heroBtn2:"Calculator",
        heroNote:"* Demo page. We’ll change numbers/text later.",
        rightCardTitle:"3D image placeholder",
        rightCardText1:"Your image goes here", rightCardText2:"Send an image — we’ll insert it",
        mini1:"TVL", mini2:"Users", mini3:"APR",
        advTitle:"Advantages", advDesc:"Placeholders for now.", stakeNowArrow:"Stake now →",
        howTitle:"How to start", howDesc:"3 steps (placeholders).",
        plansTitle:"Plans", plansDesc:"No numbers yet — we’ll add later.", stakeBtn:"Stake",
        calcSmall:"Calculator", calcTitle:"Profit calculator", calcNote:"Slider + manual input",
        amountLabel:"Amount (TON)", daysLabel:"Days",
        planLabel:"Plan", rateLabel:"Rate", profitLabel:"Profit", totalLabel:"Total return",
        calcFormulaNote:"Formula: profit = amount × rate × days (no compounding)",
        topupSmall:"Top up", topupTitle:"Top up TON", topupConfirm:"Confirm in wallet",
        topupAmount:"Amount (TON)", depositBtn:"Deposit", feeNote:"Network fee is paid by the user.",
        faqTitle:"FAQ",
        faq1Q:"Is it automatic withdrawal?", faq1A:"No. Only after user confirms in wallet.",
        faq2Q:"Why sliders?", faq2A:"To quickly change amount & days and instantly see the result."
      }
    };

    function applyLang(){
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const k = el.getAttribute('data-i18n');
        if(T[currentLang] && T[currentLang][k]) el.textContent = T[currentLang][k];
      });
      localStorage.setItem('lang', currentLang);
    }
    document.getElementById('langEN').addEventListener('click', ()=>{ currentLang='en'; applyLang(); });
    document.getElementById('langRU').addEventListener('click', ()=>{ currentLang='ru'; applyLang(); });

    // ====== Calculator sliders + manual input (NUMBERS ON) ======
    const amountRange = document.getElementById('amountRange');
    const daysRange = document.getElementById('daysRange');
    const amountInput = document.getElementById('amountInput');
    const daysInput = document.getElementById('daysInput');
    const amountOut = document.getElementById('amountOut');
    const daysOut = document.getElementById('daysOut');
    const planOut = document.getElementById('planOut');
    const rateOut = document.getElementById('rateOut');
    const profitOut = document.getElementById('profitOut');
    const totalOut = document.getElementById('totalOut');
    const calcError = document.getElementById('calcError');

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }
    function parseNum(v){ const n = Number(String(v).replace(',', '.').trim()); return Number.isFinite(n)? n : NaN; }

    // твои тарифы
    function getPlan(amount){
      // Basic: 10 <= a < 1000
      // Pro: 1000 <= a < 5000
      // Premium: 5000 <= a <= 10000
      if(amount >= 10 && amount < 1000) return {name:'Basic', rate:0.003};
      if(amount >= 1000 && amount < 5000) return {name:'Pro', rate:0.007};
      if(amount >= 5000 && amount <= 10000) return {name:'Premium', rate:0.011};
      return null;
    }

    function renderCalc(){
      const amount = clamp(Math.round(parseNum(amountRange.value)), 10, 10000);
      const days = clamp(Math.round(parseNum(daysRange.value)), 1, 30);

      amountRange.value = String(amount);
      daysRange.value = String(days);

      amountInput.value = String(amount);
      daysInput.value = String(days);

      amountOut.textContent = String(amount);
      daysOut.textContent = String(days);

      calcError.textContent = "";

      const plan = getPlan(amount);
      if(!plan){
        planOut.textContent = "—";
        rateOut.textContent = "—";
        profitOut.textContent = "—";
        totalOut.textContent = "—";
        return;
      }

      const profit = amount * plan.rate * days; // simple % per day
      const total = amount + profit;

      planOut.textContent = plan.name;
      rateOut.textContent = (plan.rate * 100).toFixed(1) + "% / day";
      profitOut.textContent = profit.toFixed(4) + " TON";
      totalOut.textContent = total.toFixed(4) + " TON";
    }

    amountRange.addEventListener('input', renderCalc);
    daysRange.addEventListener('input', renderCalc);

    amountInput.addEventListener('input', ()=>{
      const v = parseNum(amountInput.value);
      if(!Number.isFinite(v)) return;
      amountRange.value = String(clamp(Math.round(v), 10, 10000));
      renderCalc();
    });
    daysInput.addEventListener('input', ()=>{
      const v = parseNum(daysInput.value);
      if(!Number.isFinite(v)) return;
      daysRange.value = String(clamp(Math.round(v), 1, 30));
      renderCalc();
    });

    // ====== Top up (TON Connect) ======
    document.querySelectorAll('.quick').forEach(btn=>{
      btn.addEventListener('click', ()=> document.getElementById('payAmount').value = btn.dataset.v);
    });

    function toNanoFromInput(value){
      const parts = String(value).replace(",", ".").trim().split(".");
      const whole = parts[0] || "0";
      const frac = (parts[1] || "").padEnd(9, "0").slice(0, 9);
      return (BigInt(whole) * 1000000000n + BigInt(frac)).toString();
    }

    const TonConnectUI = window.TON_CONNECT_UI.TonConnectUI;
    const tonConnectUI = new TonConnectUI({
      manifestUrl: "https://kap352837598.github.io/tonstaking/tonconnect-manifest.json",
      buttonRootId: "connect"
    });

    const payBtn = document.getElementById('payBtn');
    const payAmount = document.getElementById('payAmount');
    const payStatus = document.getElementById('payStatus');

    function setPayStatus(msg){ payStatus.textContent = msg; }

    tonConnectUI.onStatusChange(wallet=>{
      payBtn.disabled = !wallet;
      setPayStatus(wallet ? (currentLang==='ru' ? "Кошелёк подключён ✅" : "Wallet connected ✅")
                          : (currentLang==='ru' ? "Подключи кошелёк, чтобы продолжить." : "Connect wallet to continue."));
    });

    payBtn.addEventListener('click', async ()=>{
      setPayStatus("");
      const v = String(payAmount.value).replace(",", ".").trim();
      if(!v || Number(v) <= 0){
        setPayStatus(currentLang==='ru' ? "Введите корректную сумму TON." : "Enter a valid TON amount.");
        return;
      }
      const nano = toNanoFromInput(v);

      try{
        await tonConnectUI.sendTransaction({
          validUntil: Math.floor(Date.now()/1000) + 300,
          messages: [{ address: RECEIVER_ADDRESS, amount: nano }]
        });
        setPayStatus(currentLang==='ru'
          ? "Запрос отправлен ✅\nПодтверди в Tonkeeper."
          : "Request sent ✅\nConfirm in wallet."
        );
      }catch(e){
        setPayStatus(currentLang==='ru' ? "Отменено или ошибка." : "Canceled or error.");
      }
    });

    // init
    applyLang();
    amountInput.value = "10";
    daysInput.value = "1";
    renderCalc();
  </script>
</body>
</html>
