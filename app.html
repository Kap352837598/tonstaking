<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TON Stake ‚Äî –ö–∞–±–∏–Ω–µ—Ç</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
  <style>
    :root{
      --border: rgba(15,23,42,.10);
      --shadow: 0 18px 60px rgba(2,6,23,.10);
      --blue: rgba(2,132,199,.95);
    }
    .shadowSoft{ box-shadow: var(--shadow); }
    .card{ border:1px solid var(--border); background: rgba(255,255,255,.92); border-radius: 20px; }
    .muted{ color: rgba(15,23,42,.65); }
    .btn{ border-radius: 999px; padding:.7rem 1.1rem; font-weight:700; cursor: pointer; transition: all 0.2s; }
    .btnP{ background: linear-gradient(180deg, rgba(14,165,233,1), rgba(2,132,199,1)); color:#fff; }
    .btnP:hover{ filter: brightness(.95); transform: scale(0.98); }
    .btnW{ background:#fff; border:1px solid var(--border); }
    .sidebarItem{ border-radius: 14px; padding:.78rem 1rem; display:flex; align-items:center; gap:.7rem; border:1px solid rgba(15,23,42,.08); background: rgba(248,250,252,.9); cursor:pointer; }
    .sidebarItem:hover{ background: rgba(241,250,255,.95); }
    .sidebarItemActive{ background: rgba(14,165,233,.14); border:1px solid rgba(2,132,199,.25); }
    .ringBg{
      position:absolute; right:-70px; bottom:-70px;
      width:280px; height:280px; border-radius:999px;
      border:1px solid rgba(2,132,199,.18);
    }
    .ringBg2{
      position:absolute; right:-40px; bottom:-40px;
      width:220px; height:220px; border-radius:999px;
      border:1px solid rgba(2,132,199,.16);
    }
    input[type="range"]{
      -webkit-appearance:none; width:100%; height:6px; border-radius:999px;
      background: linear-gradient(90deg, var(--blue), rgba(56,189,248,.35)); outline:none;
    }
    input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none; width:18px;height:18px;border-radius:999px; background:white;
      border:2px solid var(--blue); box-shadow:0 8px 18px rgba(2,6,23,.18); cursor:pointer;
    }
    .reveal{ opacity:0; transform: translateY(14px); transition: all .55s ease; }
    .reveal.show{ opacity:1; transform: translateY(0); }
  </style>
</head>
<body class="bg-slate-50">

<div class="min-h-screen flex">

  <aside class="w-[280px] hidden md:flex flex-col gap-4 p-5 bg-white border-r border-slate-200">
    <div class="flex items-center gap-3 px-2 py-2">
      <div class="h-10 w-10 rounded-2xl bg-sky-500"></div>
      <div class="leading-tight">
        <div class="font-semibold text-lg">TON Stake</div>
        <div class="text-xs muted">–ö–∞–±–∏–Ω–µ—Ç</div>
      </div>
    </div>

    <button id="connectBtnSide" class="btn btnP w-full flex items-center justify-center gap-2">
      <span>üîó</span> <span id="connectBtnTextSide">–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫</span>
    </button>

    <nav class="mt-1 space-y-2">
      <div class="sidebarItem sidebarItemActive" data-tab="staking">
        <span>ü™ô</span><span class="font-semibold">–°—Ç–µ–π–∫–∏–Ω–≥</span>
      </div>
      <div class="sidebarItem" data-tab="history">
        <span>üìú</span><span>–ò—Å—Ç–æ—Ä–∏—è</span>
      </div>
      <div class="sidebarItem" data-tab="support">
        <span>üí¨</span><span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
      </div>
      <div class="sidebarItem" data-tab="ref">
        <span>üë•</span><span>–†–µ—Ñ. –ø—Ä–æ–≥—Ä–∞–º–º–∞</span>
      </div>
      <div class="sidebarItem" data-tab="promo">
        <span>üéÅ</span><span>–ü—Ä–æ–º–æ–∫–æ–¥</span>
      </div>
    </nav>

    <div class="mt-auto text-xs muted px-2">
      <div>Network: TON</div>
      <div id="addrSide" class="mt-1 break-all text-sky-600">Wallet: ‚Äî</div>
    </div>
  </aside>

  <main class="flex-1">
    <div class="h-[72px] bg-white border-b border-slate-200 flex items-center justify-between px-4 md:px-8">
      <div class="flex items-center gap-3">
        <div class="md:hidden">
          <div class="h-10 w-10 rounded-2xl bg-sky-500"></div>
        </div>
        <div class="flex items-center gap-2 text-lg font-semibold">
          <span id="topTitleIcon">ü™ô</span> <span id="topTitle">–°—Ç–µ–π–∫–∏–Ω–≥</span>
        </div>
      </div>

      <button id="connectBtnTop" class="btn btnP flex items-center gap-2">
        <span>üîó</span> <span id="connectBtnTextTop">–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫</span>
      </button>
    </div>

    <div class="px-4 md:px-8 py-6">

      <section id="tab-staking" class="tabBlock space-y-6">
        <div class="grid lg:grid-cols-3 gap-4 reveal">
          <div class="card p-4 shadowSoft flex items-center justify-between">
            <div class="text-sm muted">–£–∫–∞–∂–∏—Ç–µ —Å—É–º–º—É –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ TON.</div>
            <div class="h-10 w-10 rounded-full bg-sky-600 text-white flex items-center justify-center font-bold">1</div>
          </div>
          <div class="card p-4 shadowSoft flex items-center justify-between">
            <div class="text-sm muted">–ù–∞–∂–º–∏—Ç–µ ‚Äú–í —Å—Ç–µ–π–∫–∏–Ω–≥‚Äù –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ.</div>
            <div class="h-10 w-10 rounded-full bg-sky-600 text-white flex items-center justify-center font-bold">2</div>
          </div>
          <div class="card p-4 shadowSoft flex items-center justify-between bg-gradient-to-r from-white to-sky-100">
            <div class="text-sm muted">–í—ã–≤–æ–¥ –≤–æ–∑–º–æ–∂–µ–Ω –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç.</div>
            <div class="h-10 w-10 rounded-full bg-sky-600 text-white flex items-center justify-center font-bold">3</div>
          </div>
        </div>

        <div class="grid lg:grid-cols-3 gap-4 reveal">
          <div class="card p-6 shadowSoft relative overflow-hidden lg:col-span-2">
            <div class="font-semibold">–ë–∞–ª–∞–Ω—Å –¥–µ–ø–æ–∑–∏—Ç–∞</div>
            <div class="mt-4 grid grid-cols-2 gap-4">
              <div>
                <div class="text-xs muted">–°—É–º–º–∞ –≤–∫–ª–∞–¥–∞</div>
                <div class="text-2xl font-bold">0.00 TON</div>
              </div>
              <div>
                <div class="text-xs muted">–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å</div>
                <div class="text-2xl font-bold">0.3% / –¥–µ–Ω—å</div>
              </div>
            </div>
            <div class="ringBg"></div>
            <div class="ringBg2"></div>
          </div>

          <div class="card p-6 shadowSoft relative overflow-hidden">
            <div class="font-bold">–°—Ç–∞–≤–∫–∞</div>
            <div class="mt-2 text-3xl font-bold text-sky-600">0.3%</div>
            <div class="text-sm muted mt-1">–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞–≤–∫–∞</div>
          </div>
        </div>

        <div class="grid lg:grid-cols-3 gap-4 items-start reveal">
          <div class="lg:col-span-2">
            <div class="text-lg font-bold mb-3">–î–æ–±–∞–≤–∏—Ç—å –≤ —Å—Ç–µ–π–∫–∏–Ω–≥</div>
            <div class="card p-6 shadowSoft">
              <div class="rounded-2xl bg-sky-50 border border-sky-100 p-4">
                <div class="flex items-center justify-between text-sm">
                  <div class="font-semibold text-sky-700"><span id="amountOut">10</span> TON</div>
                  <div class="muted">–í—ã–±–µ—Ä–∏—Ç–µ —Å—É–º–º—É</div>
                </div>
                <input id="amountRange" type="range" min="1" max="5000" step="1" value="10" class="mt-3" />
              </div>

              <div class="mt-4 rounded-2xl border border-sky-200 bg-white p-4">
                <div class="grid grid-cols-2 gap-3 text-sm text-center">
                  <div class="rounded-xl border border-slate-100 bg-slate-50 p-3">
                    <div class="muted text-xs">–î–æ—Ö–æ–¥ –≤ –¥–µ–Ω—å</div>
                    <div id="dayProfitOut" class="font-bold text-emerald-600">+ 0.03 TON</div>
                  </div>
                  <div class="rounded-xl border border-slate-100 bg-slate-50 p-3">
                    <div class="muted text-xs">–î–æ—Ö–æ–¥ –≤ –º–µ—Å—è—Ü</div>
                    <div id="monthProfitOut" class="font-bold text-emerald-600">+ 0.90 TON</div>
                  </div>
                </div>
              </div>

              <div class="mt-5">
                <button id="stakeBtn" class="btn btnP w-full py-4 text-lg shadow-lg">
                  –í —Å—Ç–µ–π–∫–∏–Ω–≥ ‚Üí
                </button>
                <div id="txStatus" class="mt-3 text-center text-sm font-medium"></div>
              </div>
            </div>
          </div>

          <div class="card p-6 shadowSoft">
            <div class="font-bold">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
            <div class="mt-4 text-sm space-y-3">
              <div class="flex justify-between">
                <span class="muted">–ú–∏–Ω–∏–º—É–º:</span>
                <span class="font-bold">1 TON</span>
              </div>
              <div class="flex justify-between">
                <span class="muted">–ú–∞–∫—Å–∏–º—É–º:</span>
                <span class="font-bold">5000 TON</span>
              </div>
              <div class="flex justify-between">
                <span class="muted">–°–µ—Ç—å:</span>
                <span class="font-bold text-sky-600">TON Mainnet</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="tab-history" class="tabBlock hidden card p-6 shadowSoft">
        <h2 class="text-xl font-bold">–ò—Å—Ç–æ—Ä–∏—è</h2>
        <p class="muted mt-2">–¢—É—Ç –±—É–¥–µ—Ç —Å–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.</p>
      </section>

      <section id="tab-support" class="tabBlock hidden card p-6 shadowSoft">
        <h2 class="text-xl font-bold">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</h2>
        <p class="muted mt-2">–ü–∏—à–∏—Ç–µ –Ω–∞–º –≤ Telegram: <a href="#" class="text-sky-600 font-bold">@TonStakeSupport</a></p>
      </section>

      <section id="tab-ref" class="tabBlock hidden card p-6 shadowSoft">
        <h2 class="text-xl font-bold">–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</h2>
        <p class="muted mt-2">–ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π—Ç–µ 10% –æ—Ç –∏—Ö –¥–æ—Ö–æ–¥–∞.</p>
      </section>

      <section id="tab-promo" class="tabBlock hidden card p-6 shadowSoft">
        <h2 class="text-xl font-bold">–ü—Ä–æ–º–æ–∫–æ–¥</h2>
        <input type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥" class="mt-4 w-full p-3 border rounded-xl" />
        <button class="mt-2 btn btnP w-full">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
      </section>

    </div>
  </main>
</div>

<script>
  // 1. –ù–ê–°–¢–†–û–ô–ö–ò
  const RECEIVER_ADDRESS = "UQAq0NKzs0XtMyzbOn6ieHvAMudRq5ILy8oT_TOMLD8JEutW"; // –¢–≤–æ–π –∫–æ—à–µ–ª–µ–∫
  const MANIFEST_URL = "https://kap352837598.github.io/tonstaking/tonconnect-manifest.json";

  // 2. –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø TON CONNECT
  const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
    manifestUrl: MANIFEST_URL
  });

  // 3. –≠–õ–ï–ú–ï–ù–¢–´
  const btnSide = document.getElementById("connectBtnSide");
  const btnTop = document.getElementById("connectBtnTop");
  const txtSide = document.getElementById("connectBtnTextSide");
  const txtTop = document.getElementById("connectBtnTextTop");
  const addrSide = document.getElementById("addrSide");
  const stakeBtn = document.getElementById("stakeBtn");
  const amountRange = document.getElementById("amountRange");
  const amountOut = document.getElementById("amountOut");
  const dayProfitOut = document.getElementById("dayProfitOut");
  const monthProfitOut = document.getElementById("monthProfitOut");
  const txStatus = document.getElementById("txStatus");

  // 4. –õ–û–ì–ò–ö–ê –û–ë–ù–û–í–õ–ï–ù–ò–Ø –ò–ù–¢–ï–†–§–ï–ô–°–ê
  tonConnectUI.onStatusChange(wallet => {
    if (wallet) {
      const rawAddr = wallet.account.address;
      const shortAddr = rawAddr.slice(0, 4) + "..." + rawAddr.slice(-4);
      txtSide.textContent = "–ü–æ–¥–∫–ª—é—á–µ–Ω–æ";
      txtTop.textContent = shortAddr;
      addrSide.textContent = "Wallet: " + shortAddr;
      stakeBtn.textContent = "–í —Å—Ç–µ–π–∫–∏–Ω–≥ ‚Üí";
    } else {
      txtSide.textContent = "–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫";
      txtTop.textContent = "–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫";
      addrSide.textContent = "Wallet: ‚Äî";
      stakeBtn.textContent = "–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫";
    }
  });

  // 5. –ö–õ–ò–ö –ü–û –ö–ù–û–ü–ö–ê–ú –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø
  const toggleConnect = () => tonConnectUI.connected ? tonConnectUI.disconnect() : tonConnectUI.openModal();
  btnSide.onclick = toggleConnect;
  btnTop.onclick = toggleConnect;

  // 6. –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–£–ú–ú –ü–†–ò –î–í–ò–ñ–ï–ù–ò–ò –ü–û–õ–ó–£–ù–ö–ê
  amountRange.oninput = () => {
    const val = parseFloat(amountRange.value);
    amountOut.textContent = val;
    dayProfitOut.textContent = "+ " + (val * 0.003).toFixed(2) + " TON";
    monthProfitOut.textContent = "+ " + (val * 0.09).toFixed(2) + " TON";
  };

  // 7. –û–¢–ü–†–ê–í–ö–ê –¢–†–ê–ù–ó–ê–ö–¶–ò–ò
  stakeBtn.onclick = async () => {
    if (!tonConnectUI.connected) {
      tonConnectUI.openModal();
      return;
    }

    const amountInTon = amountRange.value;
    const nanoAmount = (BigInt(Math.floor(amountInTon * 1000000000))).toString();

    txStatus.textContent = "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤ –∫–æ—à–µ–ª—å–∫–µ...";
    txStatus.className = "mt-3 text-center text-sm font-medium text-blue-600";

    const transaction = {
      validUntil: Math.floor(Date.now() / 1000) + 300, // 5 –º–∏–Ω—É—Ç
      messages: [
        {
          address: RECEIVER_ADDRESS,
          amount: nanoAmount,
        }
      ]
    };

    try {
      await tonConnectUI.sendTransaction(transaction);
      txStatus.textContent = "‚úÖ –£—Å–ø–µ—à–Ω–æ! –°—Ä–µ–¥—Å—Ç–≤–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ —Å—Ç–µ–π–∫–∏–Ω–≥.";
      txStatus.className = "mt-3 text-center text-sm font-medium text-green-600";
    } catch (e) {
      console.error(e);
      txStatus.textContent = "‚ùå –û—à–∏–±–∫–∞ –∏–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞.";
      txStatus.className = "mt-3 text-center text-sm font-medium text-red-600";
    }
  };

  // 8. –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –í–ö–õ–ê–î–û–ö
  function showTab(key){
    document.querySelectorAll('.tabBlock').forEach(s => s.classList.add('hidden'));
    const t = document.getElementById('tab-' + key);
    if (t) t.classList.remove('hidden');

    document.querySelectorAll('.sidebarItem').forEach(i => i.classList.remove('sidebarItemActive'));
    const b = document.querySelector(`.sidebarItem[data-tab="${key}"]`);
    if (b) b.classList.add('sidebarItemActive');

    const titles = { staking: "–°—Ç–µ–π–∫–∏–Ω–≥", history: "–ò—Å—Ç–æ—Ä–∏—è", support: "–ü–æ–¥–¥–µ—Ä–∂–∫–∞", ref: "–†–µ—Ñ. –ø—Ä–æ–≥—Ä–∞–º–º–∞", promo: "–ü—Ä–æ–º–æ–∫–æ–¥" };
    document.getElementById('topTitle').textContent = titles[key] || "–ú–µ–Ω—é";
  }

  document.querySelectorAll('.sidebarItem').forEach(item => {
    item.onclick = () => showTab(item.dataset.tab);
  });

  // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('show'); });
  }, {threshold: 0.1});
  document.querySelectorAll('.reveal').forEach(el => io.observe(el));
</script>

</body>
</html>
