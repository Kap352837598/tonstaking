<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stake Platform ‚Äî –ö–∞–±–∏–Ω–µ—Ç</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{
      --border: rgba(15,23,42,.10);
      --shadow: 0 18px 60px rgba(2,6,23,.10);
      --blue: rgba(2,132,199,.95);
    }
    .shadowSoft{ box-shadow: var(--shadow); }
    .card{ border:1px solid var(--border); background: rgba(255,255,255,.92); border-radius: 20px; }
    .muted{ color: rgba(15,23,42,.65); }
    .btn{ border-radius: 999px; padding:.7rem 1.1rem; font-weight:700; }
    .btnP{ background: linear-gradient(180deg, rgba(14,165,233,1), rgba(2,132,199,1)); color:#fff; }
    .btnP:hover{ filter: brightness(.98); }
    .btnW{ background:#fff; border:1px solid var(--border); }
    .sidebarItem{ border-radius: 14px; padding:.78rem 1rem; display:flex; align-items:center; gap:.7rem; border:1px solid rgba(15,23,42,.08); background: rgba(248,250,252,.9); cursor:pointer; }
    .sidebarItem:hover{ background: rgba(241,250,255,.95); }
    .sidebarItemActive{ background: rgba(14,165,233,.14); border:1px solid rgba(2,132,199,.25); }
    .ringBg{
      position:absolute; right:-70px; bottom:-70px;
      width:280px; height:280px; border-radius:999px;
      border:1px solid rgba(2,132,199,.18);
    }
    .ringBg2{
      position:absolute; right:-40px; bottom:-40px;
      width:220px; height:220px; border-radius:999px;
      border:1px solid rgba(2,132,199,.16);
    }
    input[type="range"]{
      -webkit-appearance:none; width:100%; height:6px; border-radius:999px;
      background: linear-gradient(90deg, var(--blue), rgba(56,189,248,.35)); outline:none;
    }
    input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none; width:18px;height:18px;border-radius:999px; background:white;
      border:2px solid var(--blue); box-shadow:0 8px 18px rgba(2,6,23,.18); cursor:pointer;
    }

    /* reveal-on-scroll */
    .reveal{ opacity:0; transform: translateY(14px); transition: all .55s ease; }
    .reveal.show{ opacity:1; transform: translateY(0); }
  </style>
</head>

<body class="bg-slate-50">

  <div class="min-h-screen flex">

    <!-- SIDEBAR -->
    <aside class="w-[280px] hidden md:flex flex-col gap-4 p-5 bg-white border-r border-slate-200">
      <div class="flex items-center gap-3 px-2 py-2">
        <div class="h-10 w-10 rounded-2xl bg-sky-500"></div>
        <div class="leading-tight">
          <div class="font-semibold text-lg">Your Brand</div>
          <div class="text-xs muted">Dashboard</div>
        </div>
      </div>

      <button id="connectBtnSide" class="btn btnP w-full flex items-center justify-center gap-2">
        <span>üîó</span> <span id="connectBtnTextSide">–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫</span>
      </button>

      <nav class="mt-1 space-y-2">
        <div class="sidebarItem sidebarItemActive" data-tab="staking">
          <span>ü™ô</span><span class="font-semibold">–°—Ç–µ–π–∫–∏–Ω–≥</span>
        </div>
        <div class="sidebarItem" data-tab="history">
          <span>üìú</span><span>–ò—Å—Ç–æ—Ä–∏—è</span>
        </div>
        <div class="sidebarItem" data-tab="support">
          <span>üí¨</span><span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
        </div>
        <div class="sidebarItem" data-tab="ref">
          <span>üë•</span><span>–†–µ—Ñ. –ø—Ä–æ–≥—Ä–∞–º–º–∞</span>
        </div>
        <div class="sidebarItem" data-tab="promo">
          <span>üéÅ</span><span>–ü—Ä–æ–º–æ–∫–æ–¥</span>
        </div>
      </nav>

      <div class="mt-auto text-xs muted px-2">
        <div>Network: TON</div>
        <div id="addrSide" class="mt-1 break-all">Wallet: ‚Äî</div>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="flex-1">
      <!-- TOP BAR -->
      <div class="h-[72px] bg-white border-b border-slate-200 flex items-center justify-between px-4 md:px-8">
        <div class="flex items-center gap-3">
          <div class="md:hidden">
            <div class="h-10 w-10 rounded-2xl bg-sky-500"></div>
          </div>
          <div class="flex items-center gap-2 text-lg font-semibold">
            <span id="topTitleIcon">ü™ô</span> <span id="topTitle">–°—Ç–µ–π–∫–∏–Ω–≥</span>
          </div>
        </div>

        <button id="connectBtnTop" class="btn btnP flex items-center gap-2">
          <span>üîó</span> <span id="connectBtnTextTop">–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫</span>
        </button>
      </div>

      <!-- CONTENT -->
      <div class="px-4 md:px-8 py-6">

        <!-- TABS -->
        <section id="tab-staking" class="tabBlock space-y-6">
          <!-- 3 tips -->
          <div class="grid lg:grid-cols-3 gap-4 reveal">
            <div class="card p-4 shadowSoft flex items-center justify-between">
              <div class="text-sm muted">–£–∫–∞–∂–∏—Ç–µ —Å—É–º–º—É –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ TON, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –º–æ–∂–Ω–æ –Ω–µ –≤—ã–±–∏—Ä–∞—Ç—å.</div>
              <div class="h-10 w-10 rounded-full bg-sky-600 text-white flex items-center justify-center font-bold">‚Ä∫</div>
            </div>
            <div class="card p-4 shadowSoft flex items-center justify-between">
              <div class="text-sm muted">–ù–∞–∂–º–∏—Ç–µ ‚Äú–í —Å—Ç–µ–π–∫–∏–Ω–≥‚Äù –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –≤ –∫–æ—à–µ–ª—å–∫–µ.</div>
              <div class="h-10 w-10 rounded-full bg-sky-600 text-white flex items-center justify-center font-bold">‚Ä∫</div>
            </div>
            <div class="card p-4 shadowSoft flex items-center justify-between bg-gradient-to-r from-white to-sky-100">
              <div class="text-sm muted">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –ø–æ–ª—É—á–∞–π—Ç–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è, –≤—ã–≤–æ–¥ –≤–æ–∑–º–æ–∂–µ–Ω –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç.</div>
              <div class="h-10 w-10 rounded-full bg-sky-600 text-white flex items-center justify-center font-bold">‚Ä∫</div>
            </div>
          </div>

          <!-- balance + assets -->
          <div class="grid lg:grid-cols-3 gap-4 reveal">
            <div class="card p-6 shadowSoft relative overflow-hidden">
              <div class="font-semibold">–ë–∞–ª–∞–Ω—Å –¥–µ–ø–æ–∑–∏—Ç–∞</div>

              <div class="mt-4 grid grid-cols-2 gap-4">
                <div>
                  <div class="text-xs muted">–°—É–º–º–∞ –≤–∫–ª–∞–¥–∞</div>
                  <div class="text-2xl font-bold"><span id="depTon">0.00</span> TON</div>
                </div>
                <div>
                  <div class="text-xs muted">–ü–æ –∫—É—Ä—Å—É</div>
                  <div class="text-2xl font-bold">$<span id="depUsd">0.00</span></div>
                </div>
                <div>
                  <div class="text-xs muted">–ü–æ—Å–ª–µ –±–∞–ª–∞–Ω—Å–∞</div>
                  <div class="text-2xl font-bold"><span id="afterTon">0.00</span> TON</div>
                </div>
                <div>
                  <div class="text-xs muted">–ü–æ –∫—É—Ä—Å—É</div>
                  <div class="text-2xl font-bold">$<span id="afterUsd">0.00</span></div>
                </div>
              </div>

              <button class="mt-5 w-full rounded-2xl border border-sky-600 text-sky-700 font-semibold py-3 hover:bg-sky-50">
                –í—ã–≤–µ—Å—Ç–∏
              </button>

              <div class="ringBg"></div>
              <div class="ringBg2"></div>
            </div>

            <div class="card p-6 shadowSoft lg:col-span-2 relative overflow-hidden">
              <div class="font-semibold">
                –°—Ç–æ–∏–º–æ—Å—Ç—å –∞–∫—Ç–∏–≤–æ–≤ <span class="text-sm font-normal text-sky-600">(–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è 1 —Ä–∞–∑ –≤ —á–∞—Å)</span>
              </div>

              <div class="mt-8 flex justify-center">
                <button id="connectBtnMid" class="btn btnP flex items-center gap-2">
                  <span>üîó</span> –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫
                </button>
              </div>

              <div class="ringBg"></div>
              <div class="ringBg2"></div>
            </div>
          </div>

          <!-- add staking + daily income -->
          <div class="grid lg:grid-cols-3 gap-4 items-start reveal">
            <div class="lg:col-span-2">
              <div class="text-lg font-bold mb-3">–î–æ–±–∞–≤–∏—Ç—å –≤ —Å—Ç–µ–π–∫–∏–Ω–≥</div>

              <div class="card p-6 shadowSoft">
                <div class="rounded-2xl bg-sky-50 border border-sky-100 p-4">
                  <div class="flex items-center justify-between text-sm">
                    <div class="font-semibold"><span id="amountOut">10</span></div>
                    <div class="muted">TON</div>
                  </div>
                  <input id="amountRange" type="range" min="10" max="10000" step="10" value="10" class="mt-3" />
                </div>

                <div class="mt-4 rounded-2xl bg-sky-50 border border-sky-100 p-4">
                  <div class="flex items-center justify-between text-sm">
                    <div class="font-semibold"><span id="daysOut">1</span></div>
                    <div class="muted">–î–Ω–µ–π</div>
                  </div>
                  <input id="daysRange" type="range" min="1" max="30" step="1" value="1" class="mt-3" />
                </div>

                <div class="mt-4 rounded-2xl border border-sky-200 bg-white p-4">
                  <div class="grid md:grid-cols-3 gap-3 text-sm">
                    <div class="rounded-xl border border-slate-200 bg-slate-50 p-3">
                      <div class="muted">–í —Å—É—Ç–∫–∏</div>
                      <div id="rateOut" class="font-bold">0.3%</div>
                    </div>
                    <div class="rounded-xl border border-slate-200 bg-slate-50 p-3">
                      <div class="muted">–ó–∞ 24 —á–∞—Å–∞</div>
                      <div id="dayProfitOut" class="font-bold">+ 0.03 TON</div>
                    </div>
                    <div class="rounded-xl border border-slate-200 bg-slate-50 p-3">
                      <div class="muted">–ó–∞ 30 –¥–Ω–µ–π</div>
                      <div id="monthProfitOut" class="font-bold">+ 0.90 TON</div>
                    </div>
                  </div>
                </div>

                <div class="mt-5 flex justify-end">
                  <button id="stakeBtn" class="btn btnP px-7 py-3 rounded-2xl">
                    –í —Å—Ç–µ–π–∫–∏–Ω–≥ ‚Üí
                  </button>
                </div>

                <div id="status" class="mt-3 text-sm muted"></div>
              </div>
            </div>

            <div class="card p-6 shadowSoft relative overflow-hidden">
              <div class="font-bold">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –¥–æ—Ö–æ–¥</div>
              <div class="mt-2 text-2xl font-bold">$0.00</div>
              <div class="text-sm muted">0.00 TON</div>

              <div class="mt-4 text-sm text-sky-700">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –∑–∞ –ø–µ—Ä–∏–æ–¥ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</div>
              <div class="mt-1 text-xl font-bold"><span id="earnedTon">0.00</span> TON</div>
              <div class="text-sm muted">$0.00</div>

              <div class="absolute top-6 right-6 w-24 h-24 rounded-full bg-white border border-slate-200 flex items-center justify-center shadowSoft">
                <div class="w-20 h-20 rounded-full border-4 border-emerald-400 flex items-center justify-center">
                  <div class="text-xl font-extrabold" id="ringRate">0.3%</div>
                </div>
              </div>

              <div class="mt-6 text-sm muted">
                –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª–æ–≤–∏–π. –ü–æ–∑–∂–µ –∑–∞–º–µ–Ω–∏–º –ø–æ–¥ —Ç–≤–æ–π —Ç–µ–∫—Å—Ç.
              </div>

              <div class="ringBg"></div>
              <div class="ringBg2"></div>
            </div>
          </div>
        </section>

        <section id="tab-history" class="tabBlock hidden space-y-4">
          <div class="card p-6 shadowSoft reveal">
            <div class="text-xl font-bold">–ò—Å—Ç–æ—Ä–∏—è</div>
            <div class="mt-2 muted text-sm">–°—é–¥–∞ –ø–æ–∑–∂–µ –¥–æ–±–∞–≤–∏–º —Ç–∞–±–ª–∏—Ü—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.</div>
          </div>
        </section>

        <section id="tab-support" class="tabBlock hidden space-y-4">
          <div class="card p-6 shadowSoft reveal">
            <div class="text-xl font-bold">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
            <div class="mt-2 muted text-sm">–°—é–¥–∞ –¥–æ–±–∞–≤–∏–º –∫–æ–Ω—Ç–∞–∫—Ç—ã/—Ñ–æ—Ä–º—É.</div>
          </div>
        </section>

        <section id="tab-ref" class="tabBlock hidden space-y-4">
          <div class="card p-6 shadowSoft reveal">
            <div class="text-xl font-bold">–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</div>
            <div class="mt-2 muted text-sm">–°—é–¥–∞ –¥–æ–±–∞–≤–∏–º —Ä–µ—Ñ. —Å—Å—ã–ª–∫—É –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.</div>
          </div>
        </section>

        <section id="tab-promo" class="tabBlock hidden space-y-4">
          <div class="card p-6 shadowSoft reveal">
            <div class="text-xl font-bold">–ü—Ä–æ–º–æ–∫–æ–¥</div>
            <div class="mt-2 muted text-sm">–°—é–¥–∞ –¥–æ–±–∞–≤–∏–º –≤–≤–æ–¥ –ø—Ä–æ–º–æ–∫–æ–¥–∞.</div>
          </div>
        </section>

      </div>
    </main>
  </div>

  <!-- TonConnect UI -->
  <script type="module">
    import { TonConnectUI } from "https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js";

    // ‚úÖ –í–ê–ñ–ù–û: –ø–æ—Å—Ç–∞–≤—å –°–í–û–ô –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è (–∫—É–¥–∞ –ø—Ä–∏—Ö–æ–¥—è—Ç TON)
    const RECEIVER_ADDRESS = "UQAq0NKzs0XtMyzbOn6ieHvAMudRq5ILy8oT_TOMLD8JEutW"; // <-- –∑–∞–º–µ–Ω–∏

    const tonConnectUI = new TonConnectUI({
      manifestUrl: `${location.origin}/tonconnect-manifest.json`
    });

    const statusEl = document.getElementById('status');
    const addrSide = document.getElementById('addrSide');
    const btnTextTop = document.getElementById('connectBtnTextTop');
    const btnTextSide = document.getElementById('connectBtnTextSide');

    function setStatus(t){ if(statusEl) statusEl.textContent = t || ""; }

    async function connect(){
      await tonConnectUI.openModal();
    }

    document.getElementById('connectBtnTop').addEventListener('click', connect);
    document.getElementById('connectBtnSide').addEventListener('click', connect);
    document.getElementById('connectBtnMid').addEventListener('click', connect);

    tonConnectUI.onStatusChange(wallet => {
      const connected = !!wallet;
      btnTextTop.textContent = connected ? "–ö–æ—à–µ–ª—ë–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω" : "–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫";
      btnTextSide.textContent = connected ? "–ö–æ—à–µ–ª—ë–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω" : "–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫";
      addrSide.textContent = "Wallet: " + (wallet?.account?.address || "‚Äî");
    });

    // —Ç–∞—Ä–∏—Ñ—ã
    function getPlan(amount){
      if(amount >= 10 && amount < 1000) return {name:'Basic', rate:0.003};
      if(amount >= 1000 && amount < 5000) return {name:'Pro', rate:0.007};
      if(amount >= 5000 && amount <= 10000) return {name:'Premium', rate:0.011};
      return null;
    }

    const amountRange = document.getElementById('amountRange');
    const daysRange = document.getElementById('daysRange');
    const amountOut = document.getElementById('amountOut');
    const daysOut = document.getElementById('daysOut');
    const rateOut = document.getElementById('rateOut');
    const dayProfitOut = document.getElementById('dayProfitOut');
    const monthProfitOut = document.getElementById('monthProfitOut');
    const ringRate = document.getElementById('ringRate');
    const earnedTon = document.getElementById('earnedTon');

    function fmtTon(v){ return (Math.round(v*100)/100).toFixed(2) + " TON"; }

    function renderCalc(){
      const amount = Number(amountRange.value);
      const days = Number(daysRange.value);
      amountOut.textContent = String(amount);
      daysOut.textContent = String(days);

      const plan = getPlan(amount);
      if(!plan){
        rateOut.textContent = "‚Äî";
        dayProfitOut.textContent = "‚Äî";
        monthProfitOut.textContent = "‚Äî";
        ringRate.textContent = "‚Äî%";
        earnedTon.textContent = "0.00";
        return;
      }

      const dayProfit = amount * plan.rate;
      const monthProfit = amount * plan.rate * 30;
      const earned = amount * plan.rate * days;

      const ratePct = (plan.rate*100).toFixed(1) + "%";
      rateOut.textContent = ratePct;
      ringRate.textContent = ratePct;
      dayProfitOut.textContent = "+ " + fmtTon(dayProfit);
      monthProfitOut.textContent = "+ " + fmtTon(monthProfit);
      earnedTon.textContent = (Math.round(earned*100)/100).toFixed(2);
    }

    amountRange.addEventListener('input', renderCalc);
    daysRange.addEventListener('input', renderCalc);
    renderCalc();

    // —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è
    document.getElementById('stakeBtn').addEventListener('click', async () => {
      setStatus("");

      const wallet = tonConnectUI.wallet;
      if(!wallet){
        setStatus("–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–∏ –∫–æ—à–µ–ª—ë–∫.");
        await tonConnectUI.openModal();
        return;
      }

      const amountTon = Number(amountRange.value);
      if(!Number.isFinite(amountTon) || amountTon <= 0){
        setStatus("–ù–µ–≤–µ—Ä–Ω–∞—è —Å—É–º–º–∞.");
        return;
      }

      const valueNano = BigInt(Math.round(amountTon * 1e9)); // TON -> nanotons

      try{
        await tonConnectUI.sendTransaction({
          validUntil: Math.floor(Date.now()/1000) + 300,
          messages: [{
            address: RECEIVER_ADDRESS,
            amount: valueNano.toString(),
            payload: "stake"
          }]
        });

        setStatus("–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞. –ü—Ä–æ–≤–µ—Ä—å –∫–æ—à–µ–ª—ë–∫.");
      }catch(e){
        setStatus("–û—Ç–º–µ–Ω–µ–Ω–æ –∏–ª–∏ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.");
      }
    });

    // —Ç–∞–±—ã
    const tabMap = {
      staking: {title:"–°—Ç–µ–π–∫–∏–Ω–≥", icon:"ü™ô"},
      history: {title:"–ò—Å—Ç–æ—Ä–∏—è", icon:"üìú"},
      support: {title:"–ü–æ–¥–¥–µ—Ä–∂–∫–∞", icon:"üí¨"},
      ref: {title:"–†–µ—Ñ. –ø—Ä–æ–≥—Ä–∞–º–º–∞", icon:"üë•"},
      promo: {title:"–ü—Ä–æ–º–æ–∫–æ–¥", icon:"üéÅ"},
    };

    function showTab(key){
      document.querySelectorAll('.tabBlock').forEach(s => s.classList.add('hidden'));
      document.getElementById('tab-' + key).classList.remove('hidden');

      document.querySelectorAll('.sidebarItem').forEach(i => i.classList.remove('sidebarItemActive'));
      document.querySelector(`.sidebarItem[data-tab="${key}"]`).classList.add('sidebarItemActive');

      document.getElementById('topTitle').textContent = tabMap[key].title;
      document.getElementById('topTitleIcon').textContent = tabMap[key].icon;

      // –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Ç–∞–±–∞ ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º reveal
      requestAnimationFrame(() => {
        document.querySelectorAll('#tab-' + key + ' .reveal').forEach(el => el.classList.add('show'));
      });
    }

    document.querySelectorAll('.sidebarItem').forEach(item => {
      item.addEventListener('click', () => showTab(item.dataset.tab));
    });

    // reveal on scroll
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting) e.target.classList.add('show');
      });
    }, {threshold: 0.12});

    document.querySelectorAll('.reveal').forEach(el => io.observe(el));
  </script>
</body>
</html>
